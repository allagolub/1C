# 1C
 
Практическое задание для отбора на кафедру КИС.

Голуб Алла Сергеевна, Б05-123

## Задача 4. Системное программирование

### Инструкция по запуску:

```bash
python3 diff.py
```  

Для файлов будем считать, что внутри закодированы символы ASCII.  

Идея решения задачи:  

### 1. Подсчет процента сходства.
Обозначим процент сходства файлов `p`. Рассмотрим файл из первой директории, пусть его размер равен
`size`. Тогда схожими ему могут оказаться только те файлы из второй директории, у которых размер лежит в диапазоне `[ceil(size * p / 100), floor(size / p * 100)]`. 
Почему это так? Заметим, что подсчитывать процент сходства нет смысла для тех пар файлов, размеры которых отличаются более чем на заданный процент.  
Соответственно формула выше помогает нам соптимизировать рассматриваемые файлы: вместо полного перебора за `n^2`, мы будем рассматривать меньшее количество пар. 
Для полученных вероятно схожих пар файлов заводим `dict` на каждый, в которых будем храним пары буква - ее количество вхождений в файл. 
Дополнительно к сбору данных `dict` мы за линейное время проходимся по обоим файлам, проверяя их на полное совпадени (в коде - переменная `are_fully_identical`)
Тогда для файлов с `are_fully_identical = True` процент сходства равен 100%. Дополнительно заметим, что такие пары файлов в том числе подходят и под критерий "Похожие файлы" (из условия), 
и их будем дополнительно класть в схожие с процентом 100%.
В случае с `are_fully_identical = False` процент сходства будет равен количеству совпадающих символов, деленных на количество символов в файле максимального размера, и умножить это на 100. 
Количество совпадающих символов можно посчитать, пройдя по обоим `dict` и суммируя минимальное из двух значений вхождений для одинаковых символов.
Если полученное значение схожести не меньше заданного `p`, тогда файлы тоже будут похожи.

### 2. Проверка на идентичность.
Индентичные файлы имеют процент сходства 100%. Тогда возможно сразу выдать идентичные файлы, поскольку в ходе проверки процента сходства были найдены все файлы, у которых это значение равно 100%.

### 3. Проверка файлов, которые есть в 1 директории, но нет в директории 2, и наоборот.
Используем информацию, полученную в ходе проверки идентичности файлов.  
Если для файла не был найден идентичный в другой директории, то его нет во второй директории. 
Таким образом, для директории 1 выдаем все файлы, которым нет идентичных во директории 2. Для директории 2 аналочно. 
Для получения ответа для данного пункта я дополнительно храню множества файлов для каждой директории, для которых нашелся идентичный в другой.
В коде это выражается разницей между множествами:  
```python3
set(first_files) - first_has_identical_in_second
```  
```python3
set(second_files) - second_has_identical_in_first
```